<!DOCTYPE html>
<html>
	<head>
	<title>FeedMe! by Hungry Bunch</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Stylesheets -->
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" type="text/css" href="styles/styles.css" />

	<!-- The Templates -->

	<!-- Single restaurant row template -->
    <script type="text/x-handlebars-template" id="restaurantItemTemplate">

					<a href="#/menus/{{id}}" title="{{campus}}">{{name}}</a>
					<span class="ui-li-count ui-btn-up-c ui-btn-corner-all distance">{{distance_formatted}}</span>

    </script>

	<!-- List of restaurants template -->
    <script type="text/x-handlebars-template" id="restaurantsListTemplate">

			<ul data-role="listview" id="restaurantsList" data-autodividers="true" data-inset="true" data-filter="true">
				<!-- Restaurant items will be populated here-->
			</ul>

    </script>

	<!-- Restaurants page template -->
    <script type="text/x-handlebars-template" id="restaurantsPageTemplate">

        <div data-role="header">
            <h1>Restaurants</h1>
        </div>

		<div class='content' data-role='content'> 
			<div id="restaurantsListWrapper">
				<!-- Restaurants list will be populated here -->
			</div>
        </div>
    </script>


    <!-- List of menus for a restaurants template -->
    <script type="text/x-handlebars-template" id="menuTemplate">
        <div data-role="header">
            <a href="{{prevRestaurantUrl}}" data-icon="arrow-l" class="arrow-l ui-btn-left" data-direction="reverse" data-back="true">Previous</a>
            <h1>Menu for {{restaurant.name}} (#{{restaurant.id}})</h1>
            <a href="{{nextRestaurantUrl}}" data-icon="arrow-r" class="arrow-r ui-btn-right" data-direction="reverse" data-back="true">Next</a>
        </div>

        <div data-role="content">
			<p style="float: left;">Meals for chosen restaurant:</p>
			<div id="canvas_map" style="width: 120px; height: 100px; float: right;"></div>
				
            <ul data-role="listview" data-inset="true">
            {{#with restaurant}}
            {{#each menu}}
				<li data-role="list-divider" role="heading" class="ui-li ui-li-divider ui-bar-b">{{day}}</li>
				{{#each meal}}
					<li>{{this}}</li>
				{{/each}}
            {{/each}}
            {{/with}}
            </ul>
        </div>
    </script>

    <script type="text/x-handlebars-template" id="mapTemplate">
    	<div data-role="header">
            <h1>Map</h1>
        </div>

		<div data-role="content">TODO: Nothing here yet</div>
    </script>
    <!-- Footer navigation template -->
    <script type="text/x-handlebars-template" id="footerTemplate">
        <div class="footer" data-role="footer">		
			<div data-role="navbar">
				<ul>
					<li><a href="#" data-transition="slideup">Restaurants</a></li>
					<li><a href="#/lastmenu/" data-transition="slideup">Menus</a></li>
					<li><a href="#/map/" data-transition="slideup">Map</a></li>
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->
	</script>
	  
	<!-- Include scripts -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!-- JQuery Mobile configuration, needs to be here before including jquery mobile script -->
	<script type="text/javascript">
		var FeedMe = {
			chosenRestaurant : 1,
			isStarted : false,
			startApp : function() {}, // Placeholder for start functionality
			EVENT_START_APP : 'eventStartFeedMeApp'
		};
		$(document).bind("mobileinit", function () {
		    $.mobile.ajaxEnabled = false;
		    $.mobile.linkBindingEnabled = false;
		    $.mobile.hashListeningEnabled = false;
		    $.mobile.pushStateEnabled = false;
		    $.mobile.defaultPageTransition = 'slide';

		    // Remove page from DOM when it's being replaced
		    $('div[data-role="page"]').live('pagehide', function (event, ui) {
		        $(event.currentTarget).remove();
		    });
		});
		
	</script>
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" src="scripts/lib/underscore.js"></script>
    
    <script type="text/javascript" src="scripts/lib/handlebars-1.0.0.beta.6.js"></script>
	<script type="text/javascript" src="scripts/lib/json2.js"></script>
    <script type="text/javascript" src="scripts/lib/backbone.js"></script>
    <script type="text/javascript" src="scripts/lib/backbone.localStorage.js"></script>
	<script type="text/javascript" src="scripts/lib/lscache.js"></script>	
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
	
	<!-- Lounasaika api handling -->
	<script type="text/javascript" src="scripts/api.js"></script>

	<!-- Base app logic script -->
	<script type="text/javascript" src="scripts/app.js"></script>
	
	<!-- Models, Views, Routers -->
    <script type="text/javascript" src="scripts/mvc.js"></script>
	
	<!-- Geolocation -->
    <script type="text/javascript" src="scripts/geo.js"></script>

</head>
<body>

</body>
</html>